{
  "name": "auditor",
  "version": "0.1.0",
  "description": "Audits the output of other ClearCoreAI agents based on execution traces and generates a structured quality report.",
  "author": "ClearCoreAI Contributors",
  "contact": "https://github.com/ClearCoreAI/clearcoreai",
  "license": "MIT",

  "capabilities": [
    {
      "name": "audit_trace",
      "description": "Analyzes a complete execution trace and returns a detailed quality report.",
      "custom_input_handler": "use_execution_trace",
      "input_spec": {
        "type": "object",
        "properties": {
          "steps": {
            "type": "array",
            "description": "List of steps to audit",
            "items": {
              "type": "object",
              "properties": {
                "agent": { "type": "string" },
                "input": {},
                "output": {},
                "error": { "type": "string", "nullable": true }
              },
              "required": ["agent", "input", "output"]
            }
          }
        },
        "required": ["steps"]
      },
      "output_spec": {
        "type": "object",
        "properties": {
          "status": { "type": "string" },
          "summary": { "type": "string" },
          "details": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "agent": { "type": "string" },
                "status": { "type": "string" },
                "comment": { "type": "string" },
                "score": { "type": "number" }
              },
              "required": ["agent", "status", "comment", "score"]
            }
          }
        },
        "required": ["status", "summary", "details"]
      }
    }
  ],

  "required_dependencies": [],
  "estimate_cost": {
    "unit": "waterdrops",
    "per_call": 2.0,
    "per_second": 0.0
  },
  "mood_profile": {
    "initial": "analytical",
    "possible": ["analytical", "neutral"]
  },
  "memory_profile": {
    "short_term": false,
    "long_term": false,
    "shared": false
  },
  "tools_profile": {
    "uses_llm": false,
    "external_apis": [],
    "internal_tools": []
  },
  "usage_guidelines": {
    "intended_use": "Verifies that each agent in a pipeline produces meaningful and error-free output.",
    "limitations": "Currently relies only on simple heuristics. Does not detect subtle hallucinations or advanced logic flaws.",
    "safety_notes": "Operates entirely on local traces. No sensitive or external data access."
  },

  "multi_capability_api": {
    "endpoint": "/execute",
    "method": "POST"
  },

  "audit_policy_endpoint": {
    "description": "Returns the auditing policy (schema, rules, scoring) used by this agent to evaluate execution traces.",
    "endpoint": "/audit_policy",
    "method": "GET",
    "output_spec": {
      "type": "object",
      "properties": {
        "version": { "type": "string", "description": "Policy version identifier" },
        "updated_at": { "type": "string", "description": "ISO-8601 timestamp of last update" },
        "schema": {
          "type": "object",
          "description": "JSON Schema describing the expected shape of inputs/outputs checked by the policy"
        },
        "rules": {
          "type": "array",
          "description": "List of rule objects applied during auditing",
          "items": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "description": { "type": "string" },
              "level": { "type": "string", "description": "info | warning | error" },
              "applies_to": { "type": "array", "items": { "type": "string" }, "description": "Agent names this rule targets; empty or omitted means global" },
              "conditions": { "type": "object", "description": "Key/value conditions to verify (implementation-defined)" },
              "weight": { "type": "number", "description": "Optional weight for scoring aggregation" }
            },
            "required": ["id", "description", "level"]
          }
        },
        "scoring": {
          "type": "object",
          "description": "Scoring strategy used to derive per-agent scores and global status",
          "properties": {
            "method": { "type": "string", "description": "e.g., weighted_sum, min_rule, llm_guided" },
            "thresholds": {
              "type": "object",
              "properties": {
                "ok": { "type": "number" },
                "partial": { "type": "number" },
                "fail": { "type": "number" }
              }
            }
          }
        }
      },
      "required": ["version", "updated_at", "rules"]
    }
  },

  "tags": ["agent", "audit", "validation", "pipeline", "quality"]
}